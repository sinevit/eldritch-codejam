(()=>{"use strict";const e=[{id:"azathoth",name:"azathoth",firstStage:{greenCards:1,blueCards:1,brownCards:2},secondStage:{greenCards:2,blueCards:1,brownCards:3},thirdStage:{greenCards:2,blueCards:0,brownCards:4}},{id:"cthulhu",name:"cthulhu",firstStage:{greenCards:0,blueCards:2,brownCards:2},secondStage:{greenCards:1,blueCards:0,brownCards:3},thirdStage:{greenCards:3,blueCards:0,brownCards:4}},{id:"iogSothoth",name:"iogSothoth",firstStage:{greenCards:0,blueCards:1,brownCards:2},secondStage:{greenCards:2,blueCards:1,brownCards:3},thirdStage:{greenCards:3,blueCards:0,brownCards:4}},{id:"shubNiggurath",name:"shubNiggurath",firstStage:{greenCards:1,blueCards:1,brownCards:2},secondStage:{greenCards:3,blueCards:1,brownCards:2},thirdStage:{greenCards:2,blueCards:0,brownCards:4}}],r=[{id:"easy",name:"очень легкий"},{id:"easy",name:"легкий"},{id:"normal",name:"средний"},{id:"hard",name:"сложный"},{id:"hard",name:"очень сложный"}],s=[{id:"green1",cardFace:"../src/assets/MythicCards/green/green1.png",difficulty:"easy",color:"green"},{id:"green2",cardFace:"../src/assets/MythicCards/green/green2.png",difficulty:"hard",color:"green"},{id:"green3",cardFace:"../src/assets/MythicCards/green/green3.png",difficulty:"hard",color:"green"},{id:"green4",cardFace:"../src/assets/MythicCards/green/green4.png",difficulty:"hard",color:"green"},{id:"green5",cardFace:"../src/assets/MythicCards/green/green5.png",difficulty:"hard",color:"green"},{id:"green6",cardFace:"../src/assets/MythicCards/green/green6.png",difficulty:"hard",color:"green"},{id:"green7",cardFace:"../src/assets/MythicCards/green/green7.png",difficulty:"normal",color:"green"},{id:"green8",cardFace:"../src/assets/MythicCards/green/green8.png",difficulty:"normal",color:"green"},{id:"green9",cardFace:"../src/assets/MythicCards/green/green9.png",difficulty:"normal",color:"green"},{id:"green10",cardFace:"../src/assets/MythicCards/green/green10.png",difficulty:"normal",color:"green"},{id:"green11",cardFace:"../src/assets/MythicCards/green/green11.png",difficulty:"normal",color:"green"},{id:"green12",cardFace:"../src/assets/MythicCards/green/green12.png",difficulty:"easy",color:"green"},{id:"green13",cardFace:"../src/assets/MythicCards/green/green13.png",difficulty:"normal",color:"green"},{id:"green14",cardFace:"../src/assets/MythicCards/green/green14.png",difficulty:"normal",color:"green"},{id:"green15",cardFace:"../src/assets/MythicCards/green/green15.png",difficulty:"normal",color:"green"},{id:"green16",cardFace:"../src/assets/MythicCards/green/green16.png",difficulty:"easy",color:"green"},{id:"green17",cardFace:"../src/assets/MythicCards/green/green17.png",difficulty:"easy",color:"green"},{id:"green18",cardFace:"../src/assets/MythicCards/green/green18.png",difficulty:"easy",color:"green"}],a=[{id:"brown1",cardFace:"../src/assets/MythicCards/brown/brown1.png",difficulty:"normal",color:"brown"},{id:"brown2",cardFace:"../src/assets/MythicCards/brown/brown2.png",difficulty:"normal",color:"brown"},{id:"brown3",cardFace:"../src/assets/MythicCards/brown/brown3.png",difficulty:"normal",color:"brown"},{id:"brown4",cardFace:"../src/assets/MythicCards/brown/brown4.png",difficulty:"normal",color:"brown"},{id:"brown5",cardFace:"../src/assets/MythicCards/brown/brown5.png",difficulty:"normal",color:"brown"},{id:"brown6",cardFace:"../src/assets/MythicCards/brown/brown6.png",difficulty:"hard",color:"brown"},{id:"brown7",cardFace:"../src/assets/MythicCards/brown/brown7.png",difficulty:"hard",color:"brown"},{id:"brown8",cardFace:"../src/assets/MythicCards/brown/brown8.png",difficulty:"hard",color:"brown"},{id:"brown9",cardFace:"../src/assets/MythicCards/brown/brown9.png",difficulty:"hard",color:"brown"},{id:"brown10",cardFace:"../src/assets/MythicCards/brown/brown10.png",difficulty:"hard",color:"brown"},{id:"brown11",cardFace:"../src/assets/MythicCards/brown/brown11.png",difficulty:"easy",color:"brown"},{id:"brown12",cardFace:"../src/assets/MythicCards/brown/brown12.png",difficulty:"easy",color:"brown"},{id:"brown13",cardFace:"../src/assets/MythicCards/brown/brown13.png",difficulty:"easy",color:"brown"},{id:"brown14",cardFace:"../src/assets/MythicCards/brown/brown14.png",difficulty:"easy",color:"brown"},{id:"brown15",cardFace:"../src/assets/MythicCards/brown/brown15.png",difficulty:"normal",color:"brown"},{id:"brown16",cardFace:"../src/assets/MythicCards/brown/brown16.png",difficulty:"normal",color:"brown"},{id:"brown17",cardFace:"../src/assets/MythicCards/brown/brown17.png",difficulty:"normal",color:"brown"},{id:"brown18",cardFace:"../src/assets/MythicCards/brown/brown18.png",difficulty:"normal",color:"brown"},{id:"brown19",cardFace:"../src/assets/MythicCards/brown/brown19.png",difficulty:"normal",color:"brown"},{id:"brown20",cardFace:"../src/assets/MythicCards/brown/brown20.png",difficulty:"normal",color:"brown"},{id:"brown21",cardFace:"../src/assets/MythicCards/brown/brown21.png",difficulty:"easy",color:"brown"}],c=[{id:"blue1",cardFace:"../src/assets/MythicCards/blue/blue1.png",difficulty:"hard",color:"blue"},{id:"blue2",cardFace:"../src/assets/MythicCards/blue/blue2.png",difficulty:"hard",color:"blue"},{id:"blue3",cardFace:"../src/assets/MythicCards/blue/blue3.png",difficulty:"easy",color:"blue"},{id:"blue4",cardFace:"../src/assets/MythicCards/blue/blue4.png",difficulty:"easy",color:"blue"},{id:"blue5",cardFace:"../src/assets/MythicCards/blue/blue5.png",difficulty:"easy",color:"blue"},{id:"blue6",cardFace:"../src/assets/MythicCards/blue/blue6.png",difficulty:"hard",color:"blue"},{id:"blue7",cardFace:"../src/assets/MythicCards/blue/blue7.png",difficulty:"normal",color:"blue"},{id:"blue8",cardFace:"../src/assets/MythicCards/blue/blue8.png",difficulty:"hard",color:"blue"},{id:"blue9",cardFace:"../src/assets/MythicCards/blue/blue9.png",difficulty:"normal",color:"blue"},{id:"blue10",cardFace:"../src/assets/MythicCards/blue/blue10.png",difficulty:"easy",color:"blue"},{id:"blue11",cardFace:"../src/assets/MythicCards/blue/blue11.png",difficulty:"normal",color:"blue"},{id:"blue12",cardFace:"../src/assets/MythicCards/blue/blue12.png",difficulty:"normal",color:"blue"}],n=document.querySelector(".deck-container");let t,d,i,o="",l="",g=0,u=0,f=0,b=[],y=[];function h(){e.map((e=>{e.id==o&&(g=e.firstStage.blueCards+e.secondStage.blueCards+e.thirdStage.blueCards,u=e.firstStage.greenCards+e.secondStage.greenCards+e.thirdStage.greenCards,f=e.firstStage.brownCards+e.secondStage.brownCards+e.thirdStage.brownCards,y.green=[e.firstStage.greenCards,e.secondStage.greenCards,e.thirdStage.greenCards],y.brown=[e.firstStage.brownCards,e.secondStage.brownCards,e.thirdStage.brownCards],y.blue=[e.firstStage.blueCards,e.secondStage.blueCards,e.thirdStage.blueCards])}))}function w(e,r){let s=[];for(let a=0;a<e;a++)s.push(r.shift());return s}function C(e,r){let s=r.filter((e=>"normal"===e.difficulty)),a=(0,c=s.length-1,Math.round(Math.random()*(c-0)+0));var c;e.includes(s[a])||e.push(s[a])}function p(e){return e.sort((()=>Math.random()-.5))}function m(e,r){document.querySelector(`.${e} .${r}`).innerHTML-=1}window.onload=function(){!function(){const e=document.querySelector(".ancients-container");e.onclick=function(s){n.innerHTML="",o=s.target.id,h(),[...e.childNodes].map((e=>{void 0!==e.classList&&e.classList.contains("active")&&e.classList.remove("active")})),s.target.classList.add("active"),function(){const e=document.querySelector(".difficulty-container");e.innerHTML="",r.map((r=>{let s=document.createElement("div");s.classList.add("difficulty"),s.innerHTML=r.name,e.appendChild(s)}))}()}}(),function(){const e=document.querySelector(".difficulty-container");t=[],d=[],i=[],e.onclick=function(r){l=r.target.innerHTML,b=[],[...e.childNodes].map((e=>{e.classList.contains("active")&&e.classList.remove("active")})),r.target.classList.add("active"),function(){n.innerHTML="";let e=document.createElement("span");e.classList.add("shuffle-button"),e.innerHTML="Замешать колоду",n.appendChild(e),function(){const e=document.querySelector(".shuffle-button");e.onclick=function(r){!function(e,r,s){let a=w(y.green[0],e).concat(w(y.brown[0],r),w(y.blue[0],s)),c=w(y.green[1],e).concat(w(y.brown[1],r),w(y.blue[1],s)),n=w(y.green[2],e).concat(w(y.brown[2],r),w(y.blue[2],s));b.push(a),b.push(c),b.push(n)}(t,d,i),e.style.display="none",n.innerHTML=`\n     <div class='current-state'>\n       <div class='stage-container stage1'>\n         <span class='stage-text'>Первая стадия</span>\n         <div class='dots-container'>\n             <div class=' dot green'> ${y.green[0]}</div>\n             <div class=' dot brown'> ${y.brown[0]}</div>\n             <div class=' dot blue'> ${y.blue[0]}</div>\n         </div>  \n       </div>\n       <div class='stage-container stage2'>\n         <span class='stage-text'>Вторая стадия</span>\n         <div class='dots-container'>\n         <div class=' dot green'> ${y.green[1]}</div>\n         <div class=' dot brown'> ${y.brown[1]}</div>\n         <div class=' dot blue'> ${y.blue[1]}</div>\n         </div>  \n      </div> \n     <div class='stage-container stage3'>\n         <span class='stage-text'>Третья стадия</span>\n         <div class='dots-container'>\n         <div class=' dot green'> ${y.green[2]}</div>\n         <div class=' dot brown'> ${y.brown[2]}</div>\n         <div class=' dot blue'> ${y.blue[2]}</div>\n         </div>  \n     </div>\n     <div class='deck'></div>  \n     <div class='last-card'></div>  \n     </div>\n            \n     `,document.querySelector(".deck").onclick=function(e){!function(){let e;const r=document.querySelector(".last-card"),s=document.querySelector(".deck");if(b[0].length>0)e=p(b[0]).shift(),console.log("stage1",e.id,e.difficulty),document.querySelector(".stage1 .stage-text").classList.add("active"),m("stage1",e.color);else if(b[1].length>0)e=p(b[1]).shift(),console.log("stage2",e.id,e.difficulty),document.querySelector(".stage1 .stage-text").classList.remove("active"),document.querySelector(".stage2 .stage-text").classList.add("active"),m("stage2",e.color);else{if(!(b[2].length>0))return void(s.style.opacity=0);e=p(b[2]).shift(),console.log("stage3",e.id,e.difficulty),document.querySelector(".stage2 .stage-text").classList.remove("active"),document.querySelector(".stage3 .stage-text").classList.add("active"),m("stage3",e.color)}r.style.backgroundImage=`url(${e.cardFace})`}()}}}()}(),function(){if(console.log(l),"средний"===l&&(t=s.slice(0),i=c.slice(0),d=a.slice(0)),"легкий"===l&&(t=s.filter((e=>"hard"!=e.difficulty)),i=c.filter((e=>"hard"!=e.difficulty)),d=a.filter((e=>"hard"!=e.difficulty))),"очень легкий"===l){for(t=s.filter((e=>"easy"==e.difficulty)),i=c.filter((e=>"easy"==e.difficulty)),d=a.filter((e=>"easy"==e.difficulty));t.length<u;)C(t,s);for(;d.length<f;)C(d,a);for(;i.length<g;)C(i,c)}if("сложный"===l&&(t=s.filter((e=>"easy"!==e.difficulty)),i=c.filter((e=>"easy"!==e.difficulty)),d=a.filter((e=>"easy"!==e.difficulty))),"очень сложный"===l){for(t=s.filter((e=>"hard"==e.difficulty)),i=c.filter((e=>"hard"==e.difficulty)),d=a.filter((e=>"hard"==e.difficulty));t.length<u;)C(t,s);for(;d.length<f;)C(d,a);for(;i.length<g;)C(i,c)}}()}}()}})();